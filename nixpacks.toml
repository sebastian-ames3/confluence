# Nixpacks configuration for Railway deployment
# Explicitly use Python provider (package.json for Playwright tests was causing Node.js detection)

# Force Python provider - this is the key fix
providers = ["python"]

[phases.setup]
nixPkgs = ["ffmpeg", "chromium", "chromedriver"]

# Let Python provider handle pip install automatically from requirements.txt
# Do NOT override [phases.install] - that breaks pip detection

[start]
cmd = "python3 scripts/run_migrations.py --auto && python3 -m uvicorn backend.app:app --host 0.0.0.0 --port $PORT"
