# PRD-001: Project Setup & Infrastructure

**Version**: 1.0  
**Date**: 2025-11-18  
**Phase**: 0 - Setup  
**Duration**: 1 day  
**Status**: Not Started

---

## Objective

Initialize the Macro Confluence Hub repository with proper structure, documentation, and development tooling. Establish GitHub Issues and Milestones for tracking all subsequent work.

---

## Success Criteria

- [ ] Monorepo structure created with all directories
- [ ] CHANGELOG.md initialized
- [ ] README.md updated with project overview
- [ ] .gitignore configured
- [ ] requirements.txt with initial dependencies
- [ ] GitHub Issues created for all Phase 1 tasks
- [ ] GitHub Milestones created for all 5 phases
- [ ] First commit pushed to main branch
- [ ] Sebastian reviews and approves structure

---

## Technical Specifications

### Directory Structure

```
confluence/
├── docs/
│   ├── CLAUDE.md
│   ├── PRD_MASTER.md
│   ├── PRD-001.md
│   ├── PRD-002.md
│   ├── ... (through PRD-011.md)
│   └── macro_confluence_definition.md
│
├── agents/
│   ├── __init__.py
│   ├── base_agent.py
│   ├── content_classifier.py
│   ├── transcript_harvester.py
│   ├── pdf_analyzer.py
│   ├── image_intelligence.py
│   ├── confluence_scorer.py
│   └── cross_reference.py
│
├── collectors/
│   ├── __init__.py
│   ├── base_collector.py
│   ├── discord_self.py
│   ├── macro42.py
│   ├── twitter_scraper.py
│   ├── youtube_api.py
│   └── substack_rss.py
│
├── backend/
│   ├── __init__.py
│   ├── app.py
│   ├── models.py
│   ├── routes/
│   │   ├── __init__.py
│   │   ├── collect.py
│   │   ├── analyze.py
│   │   └── confluence.py
│   ├── scheduler.py
│   └── utils/
│       ├── __init__.py
│       ├── auth.py
│       ├── db.py
│       └── claude_api.py
│
├── database/
│   ├── schema.sql
│   ├── migrations/
│   │   └── .gitkeep
│   └── .gitkeep
│
├── frontend/
│   ├── public/
│   │   └── index.html
│   ├── src/
│   │   ├── components/
│   │   ├── pages/
│   │   ├── App.jsx
│   │   └── index.js
│   ├── package.json
│   └── .gitkeep
│
├── tests/
│   ├── __init__.py
│   ├── test_agents/
│   │   └── __init__.py
│   ├── test_collectors/
│   │   └── __init__.py
│   └── test_integration/
│       └── __init__.py
│
├── scripts/
│   └── discord_local.py
│
├── config/
│   ├── .gitkeep
│   └── example.credentials.json
│
├── .github/
│   └── workflows/
│       └── tests.yml
│
├── .gitignore
├── requirements.txt
├── README.md
├── CHANGELOG.md
├── railway.json
└── .env.example
```

---

## Tasks

### Task 1.1: Create Directory Structure
**Estimate**: 30 minutes  
**Assignee**: Claude

**Actions**:
1. Create all directories listed above
2. Add `.gitkeep` files to empty directories
3. Create `__init__.py` in all Python package directories
4. Create placeholder files with TODO comments

**Acceptance Criteria**:
- All directories exist
- Structure matches specification exactly
- Can `import agents` and `import collectors` without errors

---

### Task 1.2: Create .gitignore
**Estimate**: 15 minutes  
**Assignee**: Claude

**Contents**:
```
# Python
__pycache__/
*.py[cod]
*$py.class
*.so
.Python
venv/
env/
ENV/

# Database
*.db
*.sqlite3

# Credentials
config/credentials.json
.env
*.key
*.pem

# IDE
.vscode/
.idea/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Frontend
node_modules/
dist/
build/
.next/

# Logs
*.log
logs/

# Testing
.coverage
htmlcov/
.pytest_cache/

# Railway
.railway/
```

**Acceptance Criteria**:
- File created
- Covers Python, JS, database, credentials
- Sebastian's credentials.json not trackable in git

---

### Task 1.3: Create requirements.txt
**Estimate**: 20 minutes  
**Assignee**: Claude

**Initial Dependencies**:
```
# Web Framework
fastapi==0.109.0
uvicorn==0.27.0
python-multipart==0.0.6

# Database
sqlalchemy==2.0.25

# HTTP & Scraping
requests==2.31.0
beautifulsoup4==4.12.3
aiohttp==3.9.1

# Discord
discord.py-self==2.0.0

# PDF Processing
pypdf2==3.0.1
pdfplumber==0.10.3

# AI APIs
anthropic==0.18.1
openai==1.12.0

# YouTube
google-api-python-client==2.116.0

# RSS
feedparser==6.0.11

# Utilities
python-dotenv==1.0.0
schedule==1.2.0
pydantic==2.5.3

# Testing
pytest==7.4.4
pytest-asyncio==0.23.3
pytest-cov==4.1.0
```

**Acceptance Criteria**:
- File created with pinned versions
- All dependencies relevant to project
- Can `pip install -r requirements.txt` successfully

---

### Task 1.4: Create .env.example
**Estimate**: 10 minutes  
**Assignee**: Claude

**Contents**:
```
# API Keys
CLAUDE_API_KEY=your_claude_api_key_here
WHISPER_API_KEY=your_openai_api_key_here
YOUTUBE_API_KEY=your_youtube_api_key_here

# Database
DATABASE_URL=sqlite:///database/confluence.db

# Security
SECRET_KEY=your_secret_key_here

# 42 Macro Credentials
MACRO42_EMAIL=your_email_here
MACRO42_PASSWORD=your_password_here

# Twitter
TWITTER_SESSION_TOKEN=your_twitter_session_here

# Discord (for local script)
DISCORD_USER_TOKEN=your_discord_token_here

# Railway
RAILWAY_ENV=production
```

**Acceptance Criteria**:
- Template file created
- All required environment variables listed
- Instructions in comments

---

### Task 1.5: Initialize CHANGELOG.md
**Estimate**: 10 minutes  
**Assignee**: Claude

**Initial Content**:
```markdown
# Changelog

All notable changes to the Macro Confluence Hub project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- Initial project structure
- Documentation: CLAUDE.md, PRD_MASTER.md, PRD-001 through PRD-011
- Directory structure for agents, collectors, backend, frontend
- Configuration files: .gitignore, requirements.txt, .env.example

### Changed
- README.md updated with project overview

### Deprecated
- N/A

### Removed
- N/A

### Fixed
- N/A

### Security
- Credentials excluded from git via .gitignore

## [0.1.0] - 2025-11-18

### Added
- Project initialization
- GitHub repository created
```

**Acceptance Criteria**:
- File follows Keep a Changelog format
- Includes initial project setup entries
- Ready for future updates

---

### Task 1.6: Update README.md
**Estimate**: 30 minutes  
**Assignee**: Claude

**Sections**:
1. Project Title & Description
2. Problem Statement
3. Features
4. Architecture Overview
5. Quick Start (setup instructions)
6. Development Workflow
7. Testing
8. Deployment
9. Contributing
10. License

**Acceptance Criteria**:
- Professional, clear README
- Setup instructions accurate
- Architecture diagram (ASCII or link to image)
- Links to CLAUDE.md and PRD_MASTER.md

---

### Task 1.7: Create GitHub Issues
**Estimate**: 1 hour  
**Assignee**: Sebastian (with Claude's help)

**Actions**:
1. Create Milestones for each Phase (0-4)
2. For each task in PRD-002 through PRD-011, create an Issue
3. Assign Issues to appropriate Milestones
4. Add labels to Issues
5. Priority and dependency ordering

**Issue Template**:
```
Title: [PRD-XXX] Task Name

Description:
Brief description of the task.

**PRD Reference**: PRD-XXX
**Phase**: X
**Estimate**: X hours/days
**Dependencies**: #issue-number (if any)

**Acceptance Criteria**:
- [ ] Criterion 1
- [ ] Criterion 2

**Technical Notes**:
Any relevant implementation details.
```

**Acceptance Criteria**:
- All tasks from PRD-002 to PRD-011 have Issues
- Issues properly labeled and assigned to Milestones
- Dependencies noted in Issue descriptions

---

### Task 1.8: Create CI/CD Pipeline
**Estimate**: 45 minutes  
**Assignee**: Claude

**File**: `.github/workflows/tests.yml`

**Contents**:
```yaml
name: Tests

on:
  pull_request:
    branches: [ main ]
  push:
    branches: [ main ]

jobs:
  test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3
    
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install -r requirements.txt
    
    - name: Run tests
      run: |
        pytest tests/ --cov=. --cov-report=html
    
    - name: Upload coverage
      uses: codecov/codecov-action@v3
      with:
        files: ./coverage.xml
```

**Acceptance Criteria**:
- Workflow file created
- Runs on PR to main
- Runs tests with coverage reporting
- Blocks merge if tests fail

---

### Task 1.9: Create railway.json
**Estimate**: 15 minutes  
**Assignee**: Claude

**Contents**:
```json
{
  "$schema": "https://railway.app/railway.schema.json",
  "build": {
    "builder": "NIXPACKS"
  },
  "deploy": {
    "startCommand": "uvicorn backend.app:app --host 0.0.0.0 --port $PORT",
    "restartPolicyType": "ON_FAILURE",
    "restartPolicyMaxRetries": 10
  }
}
```

**Acceptance Criteria**:
- Railway configuration file created
- Specifies start command
- Restart policy configured

---

### Task 1.10: First Commit
**Estimate**: 15 minutes  
**Assignee**: Claude

**Actions**:
1. Stage all files
2. Commit with message: `[PRD-001] Initial project structure and documentation`
3. Push to main branch

**Acceptance Criteria**:
- All files pushed to GitHub
- Commit message follows format
- Sebastian can clone repo and see structure

---

## Testing Plan

### Manual Testing
- Sebastian clones repo
- Verifies directory structure
- Confirms all docs are readable
- Checks GitHub Issues and Milestones

### Automated Testing
- N/A for this PRD (setup only)

---

## Dependencies

- GitHub repository access
- Sebastian's approval of structure

---

## Risks & Mitigations

| Risk | Impact | Mitigation |
|------|--------|------------|
| Structure doesn't match Sebastian's mental model | Medium | Review with Sebastian before finalizing |
| Missing critical directories | Low | Use checklist, review structure carefully |
| GitHub Issues overwhelming | Medium | Group by Milestone, use labels effectively |

---

## Deliverables

1. Complete monorepo structure
2. All documentation files (CLAUDE.md, PRD_MASTER.md, PRD-001 through PRD-011)
3. Configuration files (.gitignore, requirements.txt, etc.)
4. CHANGELOG.md initialized
5. README.md updated
6. GitHub Issues and Milestones created
7. CI/CD pipeline configured
8. First commit pushed to main

---

## Sign-off

**Developer**: ___________  Date: ___________  
**Sebastian**: ___________  Date: ___________

---

**Status**: Awaiting Sebastian's review and approval to begin
